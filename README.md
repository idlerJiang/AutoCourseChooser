# 上海大学选课程序
这是一个上海大学选课平台（xk.shu.edu.cn）的自动选课Python小程序。
目前控制台版本已完成并不再更新，可视化窗口版本正在制作，等待下次选课系统开启将会继续完善。
## 对于控制台版本
在代码的20、21行需要填入自己的学号和加密后的密码，加密后的密码可通过Edge浏览器中“检查”-“网络”然后点击登录，查看捕获数据并填入。
### 登录
登陆时使用requests库Post模拟登录并通过session保持会话，当读取到登陆后的“点击选择选课学期”时说明登陆成功。
### 选择选课学期
首先用BeautifulSoup提取学期数据并在控制台中展示，只需在控制台输入对应学期编号即可选择学期。
### 选课与退课
搜索选课是通过模拟选课网的Post请求获取符合条件的课程并展示，可以通过输入目标页号来切换页面。
选课和退课均是通过教师号和课程号发送Post请求进行选课。
### 自动选课
自动选课会读取当前路径下的auto.txt，其中第一行为待选课程总数，随后每两行为一门课程，第一行为课程号，第二行为教师号。
自动选课会循环查询课程剩余人数并在有空位时自动选课。在课程成功选上后则会从列表中删除该课程，若列表为空则结束程序，同时也可以手动停止。
注意由于服务器限制，无效的选课请求会导致账号封禁2小时，所以需要确保有空位再提交选课请求。
在每次查询结束后会停顿3秒以防止服务器异常封禁。

## 对于可视化窗口版本
可视化窗口版本仍在开发中，由于选课系统开放时间限制，暂时无法开发。
### 登录
在可视化窗口版本，无需再自己找到加密后的密码，而是使用selenium，只需输入账号密码即可自动打开浏览器执行登陆操作并获取浏览器的cookie和sessionID，由此实现自动登录。
同时为了防止多次重复登录，在程序启动时会先读取“config.json”，若是文件中的“sessionID”仍然有效（学校设置为24小时有效），则可以跳过登陆环节。
### 其他功能
当前仅实现了选择选课学期与查询课程，其他功能仍待完善……
